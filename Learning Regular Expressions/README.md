# 第一章 正则表达式入门  
**以下的场景：**    
精准匹配  
添加内容  
模式匹配  
精准替换  
等问题，不外乎两种场景：搜索/替换。这也是正则表达式的两种基本用途。  
正则表达式真正的威力体现在替换操作上。   

**定义**  
正则表达式是一些用来匹配和处理文本的字符串。是内置于其他语言或软件产品的“迷你”语言，最早见于Perl语言和grep等实用工具。   

**正则表达式在线测试工具**  
https://regex101.com/  

**同一个问题往往会有多种解决方案**  

# 第二章 匹配单个字符   
**普通文本(plain text)也是正则表达式，匹配其本身**  

**grep略影**  
grep是一种用来对文件或标准输入文本进行文字搜索的Unix工具。  
grep支持基本(-G)、扩展(-E)和Perl(-P)正则表达式。  
**e.g.**   
我们想在一句话（Hello，my name is aming.)中匹配中间的一段字符串（my name is) 可以这样写正则表达式:  
```shell
echo "Hello, my name is aming."|grep -P '(?<=Hello, ).*(?= aming.)'
```   
- 默认情况下，grep将把包含匹配的各个文本行全部显示出来，如果只想看匹配结果，使用-o选项  
- 使用-v选项将对操作取反，也就是只显示不匹配的文本行  
- 使用-c选项将只显示匹配的数量而不是匹配到的具体内容  
- 使用-i选项进行不区分字母大小写的匹配  
- grep工具只用来搜索，无法进行替换  

**元字符 .**  
用来匹配任意单个字符  
 
**元字符\\**  
转义字符，总是出现在具有特殊含义字符序列的开头，这个序列可以由一个或者多个字符构成    
  

# 第三章 匹配一组字符   
**元字符[和元字符]**   
使用元字符[和元字符]来定义一个字符集合。出现在其中的所有字符都是该集合的组成部分，必须匹配其中某个成员。  
`示例文本`   
```shell
sales1.xls  
orders3.xls  
sales2.xls  
sales3.xls 
apac1.xls   
europe2.xls  
na1.xls  
na2.xls  
sa1.xls  
ca1.xls  
```
`正则表达式`  
```shell 
[ns]a.\.xls  
```
`结果(只显示匹配项)`  
```shell 
na1.xls  
na2.xls  
sa1.xls  
``` 
**特殊元字符 -**  

- 使用正则表达式会频繁使用一些字符区间(0-9、A-Z、a-z等)，为了简化区间定义，提供元字符-来定义字符区间   
- 字符区间的首、尾字符可以是ASCII字符表中的任意字符，但不能首大于尾(无意义)    
- -只有出现在元字符[]之间的时候才是元字符，其他地方只是普通字符，无需转义   
- 同一个集合中可以出现多个字符区间，e.g. [A-Za-z0-9]  
      
`示例文本`   
```shell
sales1.xls  
orders3.xls  
sales2.xls  
sales3.xls 
apac1.xls   
europe2.xls  
na1.xls  
na2.xls  
sa1.xls  
ca1.xls  
```
`正则表达式`  
```shell 
[ns]a[0-9]\.xls  
```
`结果(只显示匹配项)`  
```shell 
na1.xls  
na2.xls  
sa1.xls  
```   

**元字符 ^**  
- 某些场合需要制定一组不需要匹配的字符，即排除。使用元字符^来排除某个字符集合  
- ^的效果将作用于给定字符集合里的所有字符或者字符区间，故^在字符集合之首   
 
`示例文本`   
```shell
sales1.xls  
orders3.xls  
sales2.xls  
sales3.xls 
apac1.xls   
europe2.xls  
sam.xls  
na1.xls  
na2.xls  
sa1.xls  
ca1.xls  
```
`正则表达式`  
```shell 
[ns]a[^0-9]\.xls  
```
`结果(只显示匹配项)`  
```shell 
sam.xls    
```  
    

# 第四章 使用元字符  

**空白元字符：**  

| 元字符 | 说明 |
| ----- | ----- |
| \b | 回退字符 |
| \f | 换页符 |
| \n | 换行符 |
| \r | 回车符 |
| \t | 制表符Tab |
| \v | 垂直制表符 | 
| \s | 任何一个空白字符，等价于[\f\n\t\r\v]，不包含\b |
| \S | 任何一个非空白字符，等价于[^\f\n\t\r\v]，不排除\b | 

**字母数字元字符：**  

| 元字符 | 说明 |
| ----- | ----- |
| \d | 任何一个数字字符，等价于[0-9] |
| \D | 任何一个非数字字符，等价于[^0-9] |
| \w | 任何一个字母(大小写皆可)数字字符或下划线字符，等价于[a-z0-9A-Z_] |
| \W | 任何一个非字母数字字符或下划线字符，等价于[^a-z0-9A-Z_] |
| \x | 匹配一个十六进制数值，e.g. \x0A |
| \ | 匹配一个八进制数值，e.g. \141 |   

**POSIX字符集：**  

| 元字类 | 说明 |
| ----- | ----- |
| [:alnum:] | 任何一个字母(大小写皆可)数字字符，等价于[a-z0-9A-Z] |
| [:alpha:] | 任何一个字母(大小写皆可)，等价于[a-zA-Z] |
| [:blank:] | 空格或制表符，等价于[\t ] |
| [:cntrl:] | ASCII控制字符，0~31，再加上127 |
| [:digit:] | 任何一个数字，等价于[0-9] |
| [:graph:] | 和[:print:]一样，但不包括空格 |
| [:lower:] | 任何一个小写字母，等价于[a-z] |
| [:print:] | 任何一个可打印字符 |
| [:punct:] | 既不属于[:alnum:]，也不属于[:cntrl:]的任何字符 |
| [:space:] | 任何一个空白字符，包含空格，等价于[\f\n\t\r\v ] |
| [:upper:] | 任何一个大写字母，等价于[A-Z] |
| [:xdigit:] | 任何一个十六进制数字，等价于[a-f0-9A-F] | 
  
`示例文本`   
```shell
#fefbd8
#0000ff
#d0f4e6
#f08970  
```
`正则表达式`  
```shell 
#[[:xdigit:]][[:xdigit:]][[:xdigit:]][[:xdigit:]][[:xdigit:]][[:xdigit:]]  
```
`结果(只显示匹配项)`  
```shell 
#fefbd8
#0000ff
#d0f4e6
#f08970    
```  

**注意：**    
使用[[]]两对方括号，是使用POSIX字符类所必须的，这点很重要。POSIX字符类必须出现在[:和:]之间，外层的[]为字符集合元字符。   


